<script>
        const tokenAddress = "0xf42afb01a4a981fa542076d1821a3f6704462ecf"; // $FINPEPE contract address
        const tokenDecimals = 18;
        const pepeUnchainedRPC = "https://your-pepe-unchained-rpc-url"; // Replace with actual RPC URL

        const pepeUnchainedChainId = "0x1234"; // Replace with actual Chain ID
        const pepeUnchainedChainName = "Pepe Unchained Layer2";
        const pepeUnchainedSymbol = "PEPE";
        const pepeUnchainedExplorer = "https://explorer.pepeunchained.com"; // Replace with actual block explorer

        async function connectWallet() {
            if (window.ethereum) {
                try {
                    // Request user to switch to Pepe Unchained Layer2
                    await window.ethereum.request({
                        method: "wallet_addEthereumChain",
                        params: [{
                            chainId: pepeUnchainedChainId,
                            chainName: pepeUnchainedChainName,
                            nativeCurrency: {
                                name: pepeUnchainedSymbol,
                                symbol: pepeUnchainedSymbol,
                                decimals: 18
                            },
                            rpcUrls: [pepeUnchainedRPC],
                            blockExplorerUrls: [pepeUnchainedExplorer]
                        }]
                    });

                    // Request wallet connection
                    const accounts = await window.ethereum.request({ method: "eth_requestAccounts" });
                    const walletAddress = accounts[0];
                    document.getElementById("wallet-address").innerText = "Connected: " + walletAddress.slice(0, 6) + "..." + walletAddress.slice(-4);

                    fetchTokenBalance(walletAddress);
                } catch (error) {
                    console.error("Wallet connection failed", error);
                    document.getElementById("wallet-address").innerText = "Connection failed!";
                }
            } else {
                document.getElementById("wallet-address").innerText = "MetaMask not detected!";
            }
        }

        async function fetchTokenBalance(walletAddress) {
            if (window.ethereum) {
                const web3 = new Web3(pepeUnchainedRPC);
                const tokenABI = [
                    {
                        "constant": true,
                        "inputs": [{"name": "_owner", "type": "address"}],
                        "name": "balanceOf",
                        "outputs": [{"name": "balance", "type": "uint256"}],
                        "type": "function"
                    }
                ];
                const tokenContract = new web3.eth.Contract(tokenABI, tokenAddress);
                try {
                    const balance = await tokenContract.methods.balanceOf(walletAddress).call();
                    const formattedBalance = balance / Math.pow(10, tokenDecimals);
                    document.getElementById("token-balance").innerText = "Your $FINPEPE Balance: " + formattedBalance.toFixed(4);
                } catch (error) {
                    console.error("Error fetching token balance", error);
                    document.getElementById("token-balance").innerText = "Failed to fetch balance!";
                }
            }
        }
    </script>
